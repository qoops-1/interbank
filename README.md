# Interbank KYC

Библиотека и тестовое приложение для обмена KYC анкетами при межбанковском взаимодействии.

## Обоснование

Банки, вступающие в бизнес друг с другом, вступают в отношения клиент-поставщик. По закону, в таких отношениях банк обязан удостовериться, что с клиентом можно иметь делать. Это так называемая политика Know Your Customer. В России её определяет 115 федеральный закон. Банки обмениваются KYC-анкетами, которые содержат данные о контактных данных, капитале, управлении, структуре собственности и мерах, предпринимаемых по борьбе с отмыванием денежных средств. 

### Проблема

KYC анкеты передаются в бумажном виде. Это медленно и трудоёмко. Отдельные сотрудники существуют только для оформления этих бумаг.

### Решение

Логически обмен KYC анкетами представляет собой рассылку документов подписчикам. Обеспечим отношения издатель-подписчик через публикацию обновлений об изменении KYC анкет на блокчейне. Подписчики, их число, собственно KYC анкета - структура взаимоотношений - являются конфиденциальной информацией. Для сохранения в секрете структуры взаимоотношений воспользуемся шифрованием и обфускацией этой информации в соответствии со схемой в слайдах.

### Что дальше

KYC анкеты между банками представляют собой точку входа в открытые банковские API, а также возможность участия в экосистеме финансовых услуг Мастерчейна небанковских провайдеров услуг.

## Установка

    $ cd interbank
    $ npm link

### Сторонние компоненты

* **Ethereum:** Считаем, что на машине развёрнута эфириум-нода со стандартным HTTP RPC API `http://localhost:8545`.
* **Swarm:** Необходимо, чтобы на машине работал swarm со стандартным HTTP RPC API `http://localhost:8500/bzzr:`. Для установки Swarm следует пройти шаги, изложенные в [Swarm Guide](https://swarm-guide.readthedocs.io/en/latest/installation.html).
 
### Конфигурация

    $ interbank setup

Здесь требуется указать путь к директории с данными Ethereum и адрес банка,
например, `0x843e9747efd6104f197784f99e9714618a47fb81`.

После этого необходимо импортировать ключ получателей вашей KYC карточки в формате JWK:

    $ interbank import 0x843e9747efd6104f197784f99e9714618a47fb81.json
    
По необходимости следует экспортировать свой ключ и передать его контрагенту

    $ interbank export p4$$w0rd /path/to/exported/key.json
    
## Использование

Для загрузки файла KYC анкеты следует выполнить

    $ interbank upload p4$$w0rd /path/to/kyc.pdf --network mc
    
Для выгрузки KYC анкеты контрагента с адресом `0xdeadbeaf`:

    $ interbank download p4$$w0rd /path/to/deadbeaf_kyc.pdf --address 0xdeadbeaf --network mc
    
Пароль `p4$$w0rd` необходим здесь, так как происходит восстановление приватного ключа из его зишафрованной
паролем формы.

## Docker

    $ docker build .
    $ docker run -v /path/to/datadir:/datadir -e "KEY_FILE_PATH=/datadir/keystore/UTC--2016-12-18T09-50-49.590391588Z--0434984cd3959c18d7e17ee3fc35a2a6249ca828" \
      -e "ETH_NETWORK=mc" \
      -e "ETH_HOST=localhost" \
      -e "ETH_PORT=8545" \
      -e "SWARM_HOST=localhost" \
      -e "SWARM_PORT=8500" \
      IMAGE 
